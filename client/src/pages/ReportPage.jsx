import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { FaBars, FaMapMarkerAlt, FaRegClipboard } from 'react-icons/fa';
import logo from '../assets/mainlogo.png';
import './ReportPage.css';

const ReportPage = () => {
    const navigate = useNavigate();
    const [selectedDate, setSelectedDate] = useState('2025.07.11');
    const [reports, setReports] = useState([]);

    // ÏÉòÌîå Î≥¥Í≥†ÏÑú Îç∞Ïù¥ÌÑ∞
    useEffect(() => {
        const sampleReports = [
            {
                date: '2025.07.11',
                title: '2025.07.11 Î≥¥Í≥†ÏÑú',
                mood: 'Î≥¥ÌÜµ',
                activities: [
                    '**ÏùºÏÉÅ Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏Î•º ÌÜµÌï¥ ÏûêÏã†ÏùÑ Ï≤¥ÌÅ¨ÌïòÎèÑÎ°ù ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§.**',
                    '1. **Ïã¨Î¶¨ ÏÉÅÎã¥ÏÑºÌÑ∞Î•º Ï∞æÏùÑ ÌïÑÏöîÍ∞Ä**',
                    'Ïã¨Î¶¨ ÏÉÅÎã¥ÏùÑ Î∞õÎäî Í≤ÉÏùÄ ÏïΩÌïú Í≤ÉÏù¥ ÏïÑÎãàÎùº, ÏûêÏã†Ïùò ÎßàÏùå Í±¥Í∞ïÏùÑ ÏúÑÌïú Ï§ëÏöîÌïú ÏÑ†ÌÉùÏûÖÎãàÎã§. Ï†ÑÎ¨∏Í∞ÄÏôÄ Ìï®Íªò Ïù¥ÏïºÍ∏∞Î•º ÎÇòÎàÑÎ©∞ ÏûêÏã†Ïùò Í∞êÏ†ïÍ≥º ÏÉùÍ∞ÅÏùÑ Ï†ïÎ¶¨ÌïòÍ≥†, ÏÉàÎ°úÏö¥ Í¥ÄÏ†êÏùÑ ÏñªÏùÑ Ïàò ÏûàÏäµÎãàÎã§.',
                    '',
                    '2. **ÎßàÏùåÍ±¥Í∞ïÏùÑ ÏúÑÌïú**',
                    'Í∑úÏπôÏ†ÅÏù∏ Ïö¥Îèô, Ï∂©Î∂ÑÌïú ÏàòÎ©¥, Í±¥Í∞ïÌïú ÏãùÎã® Îì± Í∏∞Î≥∏Ï†ÅÏù∏ ÏÉùÌôú ÏäµÍ¥ÄÏùÑ Ïú†ÏßÄÌïòÎäî Í≤ÉÏù¥ Ï§ëÏöîÌï©ÎãàÎã§. ÎòêÌïú Î™ÖÏÉÅÏù¥ÎÇò ÏöîÍ∞Ä Í∞ôÏùÄ ÎßàÏùåÏùÑ ÌèâÏò®ÌïòÍ≤å ÌïòÎäî ÌôúÎèôÎèÑ ÎèÑÏõÄÏù¥ Îê©ÎãàÎã§.',
                    '',
                    '3. **ÏÇ¨ÌöåÏ†Å ÏßÄÏßÄ**',
                    'Í∞ÄÏ°±Ïù¥ÎÇò ÏπúÍµ¨Îì§Í≥ºÏùò Í¥ÄÍ≥ÑÎ•º ÏÜåÏ§ëÌûà Ïó¨Í∏∞Í≥†, Ïñ¥Î†§Ïö¥ ÏùºÏù¥ ÏûàÏùÑ ÎïåÎäî Ï£ºÎ≥Ä ÏÇ¨ÎûåÎì§ÏóêÍ≤å ÎèÑÏõÄÏùÑ ÏöîÏ≤≠ÌïòÎäî Í≤ÉÎèÑ Ï§ëÏöîÌï©ÎãàÎã§. ÌòºÏûêÏÑú Î™®Îì† Í≤ÉÏùÑ Ìï¥Í≤∞ÌïòÎ†§ ÌïòÏßÄ ÎßêÍ≥† Ìï®Íªò ÎÇòÎàÑÏÑ∏Ïöî.',
                    '',
                    '4. **ÏûêÍ∏∞ÎèåÎ¥ÑÏùò Ï§ëÏöîÏÑ±**',
                    'ÏûêÏã†ÎßåÏùò ÏãúÍ∞ÑÏùÑ Í∞ñÍ≥† Ï¢ãÏïÑÌïòÎäî ÌôúÎèôÏùÑ ÌïòÎ©∞ Ïä§Ìä∏Î†àÏä§Î•º Ìï¥ÏÜåÌïòÎäî Í≤ÉÏù¥ Ï§ëÏöîÌï©ÎãàÎã§. Ï∑®ÎØ∏ ÏÉùÌôúÏù¥ÎÇò Ïó¨Í∞Ä ÌôúÎèôÏùÑ ÌÜµÌï¥ ÎßàÏùåÏùò Ïó¨Ïú†Î•º Ï∞æÏúºÏãúÍ∏∞ Î∞îÎûçÎãàÎã§.',
                    '',
                    'Ïò§ÎäòÎèÑ ÌïòÎ£®Î•º Ïûò Î≥¥ÎÇ¥ÏÖ®ÏäµÎãàÎã§. ÏûëÏùÄ Í≤ÉÎì§ÏóêÎèÑ Í∞êÏÇ¨ÌïòÎ©∞ ÎÇ¥ÏùºÎèÑ Í±¥Í∞ïÌïòÍ≥† ÌñâÎ≥µÌïú ÌïòÎ£®Í∞Ä ÎêòÏãúÍ∏∏ Î∞îÎûçÎãàÎã§. üåü'
                ]
            },
            {
                date: '2025.07.12',
                title: '2025.07.12 Î≥¥Í≥†ÏÑú',
                mood: 'Ï¢ãÏùå',
                activities: [
                    '**Ïò§ÎäòÏùò ÎßàÏùå ÏÉÅÌÉúÎ•º Ï†êÍ≤ÄÌï¥Î≥¥ÏÑ∏Ïöî.**',
                    '1. **Í∏çÏ†ïÏ†ÅÏù∏ ÌïòÎ£® Î≥¥ÎÇ¥Í∏∞**',
                    'Ïò§ÎäòÏùÄ ÌèâÏÜåÎ≥¥Îã§ Í∏∞Î∂ÑÏù¥ Ï¢ãÏïòÏäµÎãàÎã§. ÏûëÏùÄ ÏÑ±Ï∑®Îì§Ïù¥ ÏåìÏó¨ ÎßåÏ°±Ïä§Îü¨Ïö¥ ÌïòÎ£®ÏòÄÏäµÎãàÎã§. Ïù¥Îü∞ Í∏çÏ†ïÏ†ÅÏù∏ ÏóêÎÑàÏßÄÎ•º ÎÇ¥ÏùºÎèÑ Ïù¥Ïñ¥Í∞ÄÎ≥¥ÏÑ∏Ïöî.',
                    '',
                    '2. **Ïä§Ìä∏Î†àÏä§ Í¥ÄÎ¶¨**',
                    'Ïä§Ìä∏Î†àÏä§Í∞Ä ÏûàÏóàÏßÄÎßå Ï†ÅÏ†àÌûà Ìï¥ÏÜåÌï† Ïàò ÏûàÏóàÏäµÎãàÎã§. ÏÇ∞Ï±ÖÏù¥ÎÇò ÏùåÏïÖ Í∞êÏÉÅ Îì±Ïùò Î∞©Î≤ïÏù¥ ÎèÑÏõÄÏù¥ ÎêòÏóàÏäµÎãàÎã§.',
                    '',
                    '3. **Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ**',
                    'Ïò§Îäò ÎßåÎÇú ÏÇ¨ÎûåÎì§Í≥ºÏùò ÎåÄÌôîÍ∞Ä Ï¶êÍ±∞Ïõ†ÏäµÎãàÎã§. ÏÜåÌÜµÏùò Ï§ëÏöîÏÑ±ÏùÑ Îã§Ïãú ÌïúÎ≤à ÎäêÍºàÏäµÎãàÎã§.'
                ]
            },
            {
                date: '2025.07.13',
                title: '2025.07.13 Î≥¥Í≥†ÏÑú',
                mood: 'ÎÇòÏÅ®',
                activities: [
                    '**ÌûòÎì† ÌïòÎ£®Î•º Î≥¥ÎÇ¥ÏÖ®ÎÑ§Ïöî.**',
                    '1. **Í∞êÏ†ï Ïù∏Ï†ïÌïòÍ∏∞**',
                    'Ïò§ÎäòÏùÄ Ï°∞Í∏à ÌûòÎì† ÌïòÎ£®ÏòÄÏäµÎãàÎã§. Ïù¥Îü∞ Í∞êÏ†ïÎèÑ ÏûêÏó∞Ïä§Îü¨Ïö¥ Í≤ÉÏù¥Îãà ÏûêÏã†ÏùÑ ÌÉìÌïòÏßÄ ÎßàÏÑ∏Ïöî.',
                    '',
                    '2. **Ìú¥ÏãùÏùò ÌïÑÏöîÏÑ±**',
                    'Ï∂©Î∂ÑÌïú Ìú¥ÏãùÏùÑ Ï∑®ÌïòÍ≥†, ÎßàÏùåÏùÑ Îã¨ÎûòÏ§Ñ Ïàò ÏûàÎäî ÌôúÎèôÏùÑ Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî.',
                    '',
                    '3. **ÎÇ¥ÏùºÏùÄ ÏÉàÎ°úÏö¥ ÏãúÏûë**',
                    'Ïò§ÎäòÏù¥ ÌûòÎì§ÏóàÎã§Í≥† Ìï¥ÏÑú ÎÇ¥ÏùºÎèÑ Í∑∏Îü¥ Í≤ÉÏùÄ ÏïÑÎãôÎãàÎã§. ÏÉàÎ°úÏö¥ ÌïòÎ£®Î•º Í∏∞ÎåÄÌï¥Î≥¥ÏÑ∏Ïöî.'
                ]
            },
            {
                date: '2025.07.14',
                title: '2025.07.14 Î≥¥Í≥†ÏÑú',
                mood: 'Î≥¥ÌÜµ',
                activities: [
                    '**ÌèâÎ≤îÌïú ÌïòÎ£®Ïùò ÏÜåÏ§ëÌï®**',
                    '1. **ÏùºÏÉÅÏùò Í∑†Ìòï**',
                    'Ïò§ÎäòÏùÄ ÌäπÎ≥ÑÌï† Í≤É ÏóÜÎäî ÌèâÎ≤îÌïú ÌïòÎ£®ÏòÄÏßÄÎßå, Ïù¥Îü∞ ÏïàÏ†ïÏ†ÅÏù∏ ÏùºÏÉÅÎèÑ ÏÜåÏ§ëÌï©ÎãàÎã§.',
                    '',
                    '2. **ÏûêÍ∏∞ ÏÑ±Ï∞∞**',
                    'Í∞ÄÎÅîÏùÄ Ïù¥Î†áÍ≤å Ï°∞Ïö©Ìïú ÏãúÍ∞ÑÏùÑ ÌÜµÌï¥ ÏûêÏã†ÏùÑ ÎêòÎèåÏïÑÎ≥¥Îäî Í≤ÉÎèÑ Ï¢ãÏäµÎãàÎã§.'
                ]
            },
            {
                date: '2025.07.15',
                title: '2025.07.15 Î≥¥Í≥†ÏÑú',
                mood: 'Îß§Ïö∞ Ï¢ãÏùå',
                activities: [
                    '**ÌõåÎ•≠Ìïú ÌïòÎ£®ÏòÄÏäµÎãàÎã§!**',
                    '1. **ÏÑ±Ï∑®Í∞ê**',
                    'Ïò§ÎäòÏùÄ Í≥ÑÌöçÌñàÎçò ÏùºÎì§ÏùÑ Ïûò ÎßàÎ¨¥Î¶¨Ìï† Ïàò ÏûàÏñ¥ÏÑú ÎøåÎìØÌñàÏäµÎãàÎã§.',
                    '',
                    '2. **ÏóêÎÑàÏßÄ Ï∂©Ï†Ñ**',
                    'Í∏çÏ†ïÏ†ÅÏù∏ ÏóêÎÑàÏßÄÍ∞Ä Í∞ÄÎìùÌïú ÌïòÎ£®ÏòÄÏäµÎãàÎã§. Ïù¥ Í∏∞Î∂ÑÏùÑ Ïò§Îûò Í∞ÑÏßÅÌïòÏÑ∏Ïöî.'
                ]
            }
        ];
        setReports(sampleReports);
    }, []);

    const getSelectedReport = () => {
        return reports.find(report => report.date === selectedDate) || reports[0];
    };

    const getMoodColor = (mood) => {
        switch (mood) {
            case 'Îß§Ïö∞ Ï¢ãÏùå': return '#4caf50';
            case 'Ï¢ãÏùå': return '#8bc34a';
            case 'Î≥¥ÌÜµ': return '#ffc107';
            case 'ÎÇòÏÅ®': return '#ff9800';
            case 'Îß§Ïö∞ ÎÇòÏÅ®': return '#f44336';
            default: return '#9e9e9e';
        }
    };

    const getMoodEmoji = (mood) => {
        switch (mood) {
            case 'Îß§Ïö∞ Ï¢ãÏùå': return 'üòÑ';
            case 'Ï¢ãÏùå': return 'üòä';
            case 'Î≥¥ÌÜµ': return 'üòê';
            case 'ÎÇòÏÅ®': return 'üòî';
            case 'Îß§Ïö∞ ÎÇòÏÅ®': return 'üò¢';
            default: return 'üòê';
        }
    };

    const formatReportContent = (activities) => {
        return activities.map((activity, index) => {
            if (activity === '') {
                return <br key={index} />;
            }

            // Î≥ºÎìú ÌÖçÏä§Ìä∏ Ï≤òÎ¶¨
            if (activity.includes('**')) {
                const parts = activity.split('**');
                return (
                    <p key={index} style={{ margin: '8px 0', lineHeight: '1.5' }}>
                        {parts.map((part, partIndex) =>
                            partIndex % 2 === 1 ?
                                <strong key={partIndex}>{part}</strong> :
                                part
                        )}
                    </p>
                );
            }

            return (
                <p key={index} style={{ margin: '8px 0', lineHeight: '1.5' }}>
                    {activity}
                </p>
            );
        });
    };

    return (
        <div className="main-container">
            {/* ÏÉÅÎã® Ìó§Îçî */}
            <header className="header">
                <img
                    src={logo}
                    alt="ÎßàÏùåÏûêÎ¶¨ Î°úÍ≥†"
                    className="logo"
                    style={{ cursor: 'pointer' }} // ÎßàÏö∞Ïä§ Ìè¨Ïù∏ÌÑ∞ Î≥ÄÍ≤Ω
                    onClick={() => navigate('/main')} // ÌÅ¥Î¶≠ Ïãú /mainÏúºÎ°ú Ïù¥Îèô
                />
                <span className="nickname-display">ÎßàÏùå Î≥¥Í≥†ÏÑú</span>
            </header>

            <main className="report-main">
                {/* ÏôºÏ™Ω ÎÇ†Ïßú Î™©Î°ù */}
                <div className="date-list-container">
                    <h2 className="date-list-title">Î≥¥Í≥†ÏÑú</h2>
                    <div className="date-list">
                        {reports.map((report, index) => (
                            <div
                                key={report.date}
                                className={`date-item ${selectedDate === report.date ? 'active' : ''}`}
                                onClick={() => setSelectedDate(report.date)}
                            >
                                <div className="date-text">{report.title}</div>
                                <div className="mood-indicator">
                                    <span
                                        className="mood-emoji"
                                        style={{ color: getMoodColor(report.mood) }}
                                    >
                                        {getMoodEmoji(report.mood)}
                                    </span>
                                    <span className="mood-text">{report.mood}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* Ïò§Î•∏Ï™Ω Î≥¥Í≥†ÏÑú ÎÇ¥Ïö© */}
                <div className="report-content-container">
                    {getSelectedReport() && (
                        <>
                            <div className="report-header">
                                <h1 className="report-title">{getSelectedReport().title}</h1>
                                <div className="report-mood">
                                    <span
                                        className="mood-emoji-large"
                                        style={{ color: getMoodColor(getSelectedReport().mood) }}
                                    >
                                        {getMoodEmoji(getSelectedReport().mood)}
                                    </span>
                                    <span className="mood-text-large">
                                        Ïò§ÎäòÏùò Í∏∞Î∂Ñ: {getSelectedReport().mood}
                                    </span>
                                </div>
                            </div>

                            <div className="report-content">
                                <div className="welcome-message">
                                    <p>ÎßàÏùå Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏Î•º ÌÜµÌï¥ Ïò§Îäò ÌïòÎ£®Î•º ÎêòÎèåÏïÑÎ≥¥ÏÑ∏Ïöî.</p>
                                </div>

                                <div className="activities-content">
                                    {formatReportContent(getSelectedReport().activities)}
                                </div>

                                <div className="report-footer">
                                    <p style={{
                                        textAlign: 'center',
                                        color: '#666',
                                        fontStyle: 'italic',
                                        marginTop: '30px',
                                        padding: '15px',
                                        backgroundColor: '#f8f9fa',
                                        borderRadius: '8px'
                                    }}>
                                        üíô ÎßàÏùåÏûêÎ¶¨Í∞Ä Ìï®Íªò Ìï©ÎãàÎã§. Ïò§ÎäòÎèÑ ÏàòÍ≥†ÌïòÏÖ®Ïñ¥Ïöî! üíô
                                    </p>
                                </div>
                            </div>
                        </>
                    )}
                </div>
            </main>

            {/* ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */}
            <nav className="bottom-nav">
                <button onClick={() => navigate('/home')}><FaBars /></button>
                <button onClick={() => navigate('/map')}><FaMapMarkerAlt /></button>
                <button onClick={() => navigate('/report')} className="active"><FaRegClipboard /></button>
            </nav>
        </div>
    );
};

export default ReportPage;